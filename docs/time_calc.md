# 时间计算

时间计算的运算符是`#`运算符，完整的用法是:

> `#(表达式)years(表达式)months(表达式)weeks(表达式)days(表达式)hours(表达式)minutes(表达式)seconds(表达式)milliseconds`

对于`时分秒`，还支持另一种写法:

> `#HH:mm:ss` 表示HH小时mm分钟ss秒
>
> `#HH:mm` 表示HH小时mm分钟


`#HH:mm:ss` 等价于 `#(h)hours(m)minutes(s)seconds`

`#HH:mm` 等价于 `#(h)hours(m)minutes`   


时间单位支持简写，完整的简写形式：

> `#(表达式)y(表达式)m(表达式)w(表达式)d(表达式)h(表达式)mm(表达式)s(表达式)ms`

其中:
| 单位 | 完整写法 | 简写 | 其他 |
| --- | --- | --- | --- |
| 年 | years | y | year |
| 月 | months | m | month |
| 周 | weeks | w | week |
| 天 | days | d | day |
| 小时 | hours | h | hour |
| 分钟 | minutes | mm | minute |
| 秒 | seconds | s | second |
| 毫秒 | milliseconds | ms | millisecond |


- 表达式是可以选的, 不用写完整
- 当括号内的表达式是数字时，括号可以省略。

比如 `#1d` 表示1天， `#-1h` 表示-1小时， `#1.5mm` 表示1.5分钟， `#1s` 表示1秒。

- **表达式不是数字时，括号不可以省略**

`#(1+2)d` 表示`1+2=3`天

`#(1-2)h` 表示`1-2=-1`小时， 

`#(1.5+2.5)mm` 表示`1.5+2.5=4`分钟， 

`#(1+2)s` 表示`1+2=3`秒。

`#(max(3, 2, 1))w` 表示`max(3, 2, 1)=3`周



```js

#1y2m3d     // 1年2月3天

#2w3d5h     // 2周3天5小时

#1d2h3mm    // 1天2小时3分钟

#1d2h3s     // 1天2小时3秒

#1d2h3ms    // 1天2小时3毫秒

#10:10:10    // 10小时10分钟10秒

#10:10       // 10小时10分钟

// 时间加法
#1y2m3d + #3w5h = #1y2m3w3d5h

// 时间减法
#1y2m3d - #3w5h = #1y2m3w3d5h


// 2小时10分钟10秒加上1小时20分钟20秒等于3小时30分钟30秒
#2:10:10 + #1:20:20 = #3:30:30  

// 10小时10分钟10秒减去10小时10分钟等于10秒
#10:10:10 - #10:10 = #0:0:10  

```

# 时间转换

> [!tips] 年和月不能转化为毫秒，因为它们是不可精确计算的。

- `#(时间)` : 默认格式：`xx年xx月` + `xx 毫秒`

使用 `> #` 转换为其他格式：
- `#(时间) > #` : 将时间转化为格式：`xx年xx月` + ` xx 天 xx 小时 xx 分钟 xx 秒 xx 毫秒`
- `#(时间) > #w` : 将时间转化为格式：`xx年xx月` + ` xx 周`
- `#(时间) > #d` : 将时间转化为格式：`xx年xx月` + ` xx 天`
- `#(时间) > #h` : 将时间转化为格式：`xx年xx月` + ` xx 小时`
- `#(时间) > #m` : 将时间转化为格式：`xx年xx月` + ` xx 分钟`
- `#(时间) > #s` : 将时间转化为格式：`xx年xx月` + ` xx 秒`
- `#(时间) > #ms` : 不支持，因为这是默认显示格式

``` js
#1d2h2mm             // 输出: 93780000ms
#1d2h2mm > #         // 输出: 1天 2小时 2分钟 0秒
#1d2h2mm > #w        // 输出: 0.15周
#1d2h2mm > #d        // 输出: 1.08天
#1d2h2mm > #h        // 输出: 26.03小时
#1d2h2mm > #m        // 输出: 1562.00分钟
#1d2h2mm > #s        // 输出: 93720.00秒


#1y1d2h2mm          // 输出: 1年+93780000ms
#1y1d2h2mm > #      // 输出: 1年+1天 2小时 2分钟 0秒
#1y2m1d2h2mm        // 输出: 1年2月+93780000ms
#1y2m1d2h2mm > #    // 输出: 1年2月+1天 2小时 2分钟 0秒
#1y2m1d2h2mm > #d   // 输出: 1年2月+1.08天
```
